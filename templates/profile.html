{% extends "base.html" %}

{% block title %}{{ user.username }}'s Profile - College Help Forum{% endblock %}

{% block content %}
<div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <h2 style="margin-bottom: 10px;">{{ user.username }}</h2>
    <p>ðŸ“§ {{ user.email }}</p>
    {% if user.major %}
        <p>ðŸ“š {{ user.major }}</p>
    {% endif %}
    {% if user.year %}
        <p>ðŸŽ“ {{ user.year }}</p>
    {% endif %}
    <p style="margin-top: 10px; opacity: 0.9;">Member since {{ user.created_at.strftime('%B %Y') }}</p>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
    <div class="card" style="text-align: center;">
        <h3 style="color: #667eea; font-size: 36px;">{{ questions|length }}</h3>
        <p style="color: #666;">Questions Asked</p>
    </div>
    <div class="card" style="text-align: center;">
        <h3 style="color: #764ba2; font-size: 36px;">{{ answers|length }}</h3>
        <p style="color: #666;">Answers Given</p>
    </div>
</div>

<h3 style="margin: 30px 0 20px 0;">Recent Questions</h3>
{% if questions %}
    {% for question in questions[:5] %}
        <div class="card">
            <h4 style="margin-bottom: 10px;">
                <a href="{{ url_for('view_question', question_id=question.id) }}" style="color: #333; text-decoration: none;">
                    {{ question.title }}
                </a>
            </h4>
            <span class="topic-badge">{{ question.topic.name }}</span>
            <div class="user-info" style="margin-top: 10px;">
                {{ question.created_at.strftime('%b %d, %Y') }} â€¢ {{ question.answers|length }} answer{% if question.answers|length != 1 %}s{% endif %}
            </div>
        </div>
    {% endfor %}
{% else %}
    <div class="card" style="text-align: center; padding: 30px; background: #f8f9fa;">
        <p style="color: #666;">No questions posted yet</p>
    </div>
{% endif %}

<h3 style="margin: 30px 0 20px 0;">Recent Answers</h3>
{% if answers %}
    {% for answer in answers[:5] %}
        <div class="card">
            <p style="color: #666; margin-bottom: 10px;">
                Answered: <a href="{{ url_for('view_question', question_id=answer.question.id) }}" style="color: #667eea;">{{ answer.question.title }}</a>
            </p>
            <p style="color: #333;">{{ answer.content[:150] }}{% if answer.content|length > 150 %}...{% endif %}</p>
            <div style="margin-top: 10px; color: #666; font-size: 14px;">
                â¬† {{ answer.upvotes }} | â¬‡ {{ answer.downvotes }} â€¢ {{ answer.created_at.strftime('%b %d, %Y') }}
            </div>
        </div>
    {% endfor %}
{% else %}
    <div class="card" style="text-align: center; padding: 30px; background: #f8f9fa;">
        <p style="color: #666;">No answers posted yet</p>
    </div>
{% endif %}
{% endblock %}